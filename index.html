<!DOCTYPE html>
<html lang="en">

<head>
    <title>Retype Notes</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="expires" content="0">

    <!-- jQuery and Bootstrap  -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="assets/js/vendors/jquery.highlight-5.js"></script>

    <link href="assets/css/index.css" rel="stylesheet">
    <script src="assets/js/diff.js"></script>
    <script src="assets/js/app.js"></script>

</head>

<body>
    <div class="site-header" style="margin: 10px 5px;">
        <h1 class="title">Retype Notes</h1>
        <p>By Weng Fei Fung.</p>

        <div class="container">
            <div class="card card-default p-2">
                <p>Learn new programming languages by retyping them or rearranging lines of code with immediate visual feedback so you can learn through trial and error. Instead of picking a lesson, you can <a href="javascript:void();" onclick="event.preventDefault(); $('#retype-container, #rearrange-container').removeClass('hide'); document.querySelector('#retype-container').scrollIntoView();">go right to practicing.</a></p>
                <p>All the lessons here are guides that get you started on the language and may have fundamentals or often used code. For a collection of snippets that are not introductory, fundamental, or commonly needed, you can check out <a href="../snippets-mastery"
                        target="_blank">Snippets Mastery</a>.
                </p>
                <p>Advanced use: You can search for specific topics by their name or any string in the lesson content with searchboxes below. You can search by topic in the URL query: <a href="?topic=es6">?topic=e6</a> then bookmark.</p>
            </div>
        </div>
    </div>

    <div class="container" style="margin-top:4ch;">
        <div id="retype-container" class="card card-default hide">
            <div class="card-header">
                <h2 class="text-center"><i class="fa fa-keyboard"></i> Learn by Retyping</h2>
                <div style="float:right">Want to learn <a href="#explore-curriculum" onclick="animateExploreCurriculum();">other languages/frameworks</a>?</div>
            </div>
            <div class="card-body sides">
                <div class="info-nav-wrapper" style="height:80px; width:100%;">

                    <nav class="difficulty float-right">
                        <span style="font-weight:500; margin-right:2ch;">Difficulty:</span>
                        <div class="form-group inline-block" onclick="location.reload(); /* initLevel1() */">
                            <input id="level-1" value="1" class="form-control" type="radio" name="level" checked="true">
                            <label for="level-1" class="form-text" title="Highlights code as you type" data-toggle="toolbar">Level 1</label>
                        </div>
                        <div class="form-group inline-block" onclick="initLevel2()">
                            <input id="level-2" value="fog" class="form-control" type="radio" name="level">
                            <label for="level-2" class="form-text" title="Black fog covering portions of the code briefly" data-toggle="toolbar">Level 2</label>
                        </div>
                        <div class="form-group inline-block" onclick="initLevel3()">
                            <input id="level-3" value="fog" class="form-control" type="radio" name="level">
                            <label for="level-3" class="form-text" title="Black fog covering portions of the code longer" data-toggle="toolbar">Level 3</label>
                        </div>
                    </nav>
                    <span style="clear:left;"></span>

                </div>
                <aside id="old" data-class-level="1">
                    <div class="header">
                        <h3>Correct Code</h3>
                        <p>Have correct code here<a href="#" onclick="notes1()">...</a></p>
                        <div class="contents" contenteditable="true">This is a <b>sample.</b></div>
                    </div>
                </aside>

                <aside id="new" style="padding: 5px;">
                    <div class="header">
                        <h3>Retype</h3>
                        <p>
                            <span><i class="fa fa-eraser clickable" onclick="confirmEraseText()"></i></span>
                            <span style="display:inline; margin-right:2ch;"></span>
                            <span><span id="diff"></span></span>
                        </p>
                        <textarea class="contents" style="width:100%; margin-top:-6px; resize:vertical;" placeholder="Type what's on the left"></textarea>
                    </div>
                </aside>
            </div>
            <!-- /sides -->
        </div>
        <!-- card -->

        <div style="clear:both"></div>

        <div id="rearrange-container" class="card card-default hide">
            <div class="card-header">
                <h2 class="text-center"><span class="fa fa-puzzle-piece"></span> Learn by rearranging lines</h2>
            </div>
            <div class="card-body">
                <p class="text-center"><button class="btn btn-success btn-sm" onclick='if($("#old .contents").text().length===0) { $("#modal-error .message").text("You need to have text in the template area"); $("#modal-error").modal("show"); } else $("#modal-puzzle").modal("show");'>Rearrange lines <i class="fa fa-sign-out-alt"></i></button></p>
            </div>
        </div>

        <div class="card card-primary">
            <div class="card-header">
                <h2 class="text-center"><span class="fa fa-book-reader"></span> Notes</h2>
            </div>
            <div id="explore-curriculum" class="card-footer">
                <div class="card-header">
                    <h2><span class="fa fa-microscope"></span> Explore Curriculum</h2>
                </div>

                <div class="card-body">
                    <div id="js-visible-if-contents" class="hide">
                        <p>Want to practice? Can move the entire lesson to retyping/rearranging sections. For specific parts you want to practice, have content surrounded by <code>```</code>. You can have multiple sections surrounded with these backticks.
                            <br/>
                            <button class="btn btn-info btn-sm" onclick="$('#retype-container, #rearrange-container').removeClass('hide'); copyOver(); document.querySelector('#retype-container').scrollIntoView()" style="margin-top:5px">Practice retyping and rearranging</button></p>
                    </div>
                    <fieldset class="deemp-fieldset">
                        <textarea id="summary-inner" class="hide" style="height: 60vh; resize: none; width:100%;"></textarea>
                    </fieldset>
                </div>

                <div class="card-body">
                    <iframe style="padding:5px; border-radius:5px; display:inline-block; margin-top:5px; text-align:left; margin-bottom:10px; width:100%; height:400px;" src="explorer.php">
                </iframe>
                </div>
            </div>
            <!-- footer wrapping another pair of heading body -->


        </div>

        <!-- Modal -->
        <div id="modal-puzzle" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">Rearrange Lines</h2>
                    </div>
                    <div class="modal-body">
                        <div class="list-group">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>

    </div>
    <!-- /.container -->

    <!-- Designer: FontAwesome -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">

    <!-- jQuery UI, Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css"></link>

    <!-- <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->

    <!-- Autosize textarea
            https://gomakethings.com/automatically-expand-a-textarea-as-the-user-types-using-vanilla-javascript/
        -->
    <script src="assets/js/vendors/autoExpand/autoExpand.js"></script>
    <script id="auto-resize-textarea">
        document.querySelector("#summary-inner").addEventListener("input", (event) => {
            autoExpand(event.target);
        });

        window.autoExpandNow = () => {
            autoExpand(document.querySelector("#summary-inner"));
        }
        autoExpandNow();
    </script>

    <script id="copyNotesToTemplate">
        function copyOver() {
            var $summary = $("#summary-inner");
            var summary = $summary.val();
            summary = summary.trim();
            if ($summary.val().length) {
                var $template = $("#old .contents");
                // var code = [...summary.matchAll(new RegExp("`\`\`[\n\r]{0,}(.*?)[\n\r]{0,}\`\`\`", "gmi"))].map(regExpItr => regExpItr[1]);
                var code = [...summary.matchAll(new RegExp("\`\`\`((.|\n|\r)*?)\`\`\`", "gmi"))].map(regExpItr => regExpItr[1]);

                // If text has ```___```, then get all text between those backticks, otherwise just get all of the text
                if (code.length) {
                    var code = code.join("\n");
                    code = code.replaceAll("\n\n", "\n");
                    code = code.replaceAll("\r\r", "\r");
                    code = code.trim();
                    $template.text(code);
                    $template.trigger("input");
                } else {
                    $template.text(summary);
                    $template.trigger("input");
                }
            } else {
                let html = `Nothing loaded in notes. Find a lesson from the curriculum and open it here by clicking the <i class="fa fa-book-reader"></i> icon.`;
                $("#modal-error .message").html(html);
                $("#modal-error").modal("show");
            }


        }
    </script>


    <!-- Modal -->
    <div id="modal-error" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title text-danger">Error</h4>
                    <button type="button" class="close" data-dismiss="modal">Ã—</button>
                </div>
                <div class="modal-body">
                    <p class="message"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <style id="style-fogs">
        /* Dynamic fog styling */
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.min.js"></script>
    <!-- PopperJs for Tooltip -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>

</html>